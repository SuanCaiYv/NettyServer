<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login In</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script>

        var email;
        var password;
        var parameter;
        function f1() {
            request = new XMLHttpRequest();
            request.onreadystatechange = function f2() {
                if (request.status === 200 && request.readyState === 4) {
                    var ans = request.responseText;
                    var jsonObj = JSON.parse(ans);
                    if (jsonObj.code === 3) {
                        alert("密码错误")
                    }
                    else if (jsonObj.code === 2) {
                        alert("没有此用户");
                    }
                    else {
                        localStorage.setItem("user", ans);

                        var url = '/html/user.html';

                        var form = $('<form>');
                        form.attr('style', 'display:none');
                        form.attr('target', '');
                        form.attr('method', 'POST');
                        form.attr('action', url);

                        $('body').append(form);

                        form.submit();
                        form.remove();
                    }
                }
            };
            parameter = 'email='+email+'&password='+password;
            request.open('POST', "/loginIn", true);
            request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            request.send(parameter);
        }
        function f2() {
            var form = document.getElementById('form1');
            email = form.elements[0].value;
            password = form.elements[1].value;
            f1();
        }
    </script>
    <style>
        .login-button { /* 按钮美化 */
            width: 300px; /* 宽度 */
            height: 40px; /* 高度 */
            border-width: 0px; /* 边框宽度 */
            border-radius: 3px; /* 边框半径 */
            background: #1E90FF; /* 背景颜色 */
            cursor: pointer; /* 鼠标移入按钮范围时出现手势 */
            outline: none; /* 不显示轮廓线 */
            font-family: "PingFang SC Medium", cursive; /* 设置字体 */
            color: white; /* 字体颜色 */
            font-size: 17px; /* 字体大小 */
        }
        .login-button:hover { /* 鼠标移入按钮范围时改变颜色 */
            background: #5599FF;
        }
    </style>
</head>
<body>
<div align="center">
    <form action="" method="post" id="form1">
        <label>
            <input type="text" name="email" style="width: 300px; height: 40px" placeholder="邮箱">
        </label>
        <br><br><br>
        <label>
            <input type="text" name="password" style="width: 300px; height: 40px" placeholder="密码">
        </label>
        <br><br><br>
        <input type="button" class="login-button" value="提交" onclick="f2()">
    </form>
</div>
</body>
</html>